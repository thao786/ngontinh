<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <title>[[((data :titlepage) :title)]] - [[((data :titlepage) :state)]] - [[((data :titlepage) :author)]] | Trang Ngôn Tình</title>  
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="icon" href="[[((data :lib-path) :icon)]]" type="image/gif" sizes="16x16">
    <!-- Bootstrap -->  
    <link href="[[((data :lib-path) :bootcss)]]" rel="stylesheet" media="screen" type="text/css"> 
    <link rel="stylesheet" href="[[((data :lib-path) :bootstheme)]]">
    <link href="[[((data :lib-path) :docscss)]]" rel="stylesheet">  
    <link href="[[((data :lib-path) :bootsresponsive)]]" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="[[((data :lib-path) :stylesheet)]]">
    
    <style>
        body{
          background-image:url("[[((data :lib-path) :bgr)]]"); 
        }  
        @font-face {
          font-family: 'Glyphicons Halflings';
          src:  url('[[((data :lib-path) :font1)]]');
          src:  url('[[((data :lib-path) :font1)]]?#iefix') format('embedded-opentype'), 
                url('[[((data :lib-path) :font2)]]') format('woff'), 
                url('[[((data :lib-path) :font3)]]') format('truetype'), 
                url('[[((data :lib-path) :font4)]]#glyphicons_halflingsregular') format('svg');
        }
    </style>
</head>

<!--================================================== -->
 <body class="maubody1">
<div class="le">  

   <header class="navbar navbar-static-top top">
  <div class="container">       
      <ul class="nav navbar-nav">
        <li>
          <a href="#" class="black">Blog</a>
        </li>
        <li>
          <a href="#" class="black">About</a>
        </li>       
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="trangngontinh.com/dangtruyen" class="orange">Đăng Truyện</a></li>
        <li><a href="#" class="orange" id="hiendangnhap">Đăng Nhập</a>
            <div class="anHien dangnhap whiteBgr" id="dangnhapblock">
              <form class="form-signin">        
                <input type="email" class="form-control" id="nhapemail" placeholder="Nhập Email">
                <br>
                <input type="password" class="form-control" id="nhapmatkhau" placeholder="Nhập Mật Khẩu">
                <label class="checkbox"><input type="checkbox" value="remember-me"> Nhớ Thông Tin</label>
                <button class="btn btn-success" type="submit">Đăng Nhập</button>
              </form>
            </div>     
        </li>        
        <li><a href="trangngontinh.com/dangky" class="orange">Đăng Ký</a></li>
      </ul>
    
  </div>
</header>

<!--================================================== -->

  <div class="container">
    <div class="row-fluid orangebackground">
        <div class="span5">
            <br>
            <a href="trangngontinh.com" ><img src="[[((data :lib-path) :logo3)]]" class="imgFloat" width="360" height="130"></a>
        </div>
        <div class="span7">
            <div class="socialicon">
                <a href="#" ><img src="[[((data :lib-path) :facebook)]]" class="socialicon1" width="50" height="50"></a>
                <a href="#" ><img src="[[((data :lib-path) :twitter)]]" class="socialicon1" width="50" height="50"></a>
                <a href="#" ><img src="[[((data :lib-path) :rss)]]" class="socialicon1" width="50" height="50"></a> 
                <a href="#" ><img src="[[((data :lib-path) :google+)]]" class="socialicon1" width="50" height="50"></a> 
            </div>  
        </div>
    </div> 
  </div>


  <!--================================================== -->


    <div class="navbar-wrapper">
      <div class="container">
        <div class="navbar navbar-custom navbar-static-top" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand " href="trangngontinh.com"><b>Trang Ngôn Tình</b></a>
            </div>
            <div class="collapse navbar-collapse bs-navbar-collapse">
              <ul class="nav navbar-nav">
                <li><a href="trangngontinh.com">HOME</a></li>                
                <li><a href="trangngontinh.com/danhsachtruyen"><b>DANH SÁCH TRUYỆN</b></a></li>   
                <li class="active"><a href="trangngontinh.com/doctruyen"><b>ĐỌC TRUYỆN</b></a></li> 
                <li><a href="trangngontinh.com/englishnovel"><b>ENGLISH NOVEL</b></a></li>
                <li><a href="trangngontinh.com/timkiemnangcao"><b>TÌM TRUYỆN</b></a></li> 
                <li class="dropdown">
                  <a href="trangngontinh.com/chiase" class="dropdown-toggle" data-toggle="dropdown"><b>CHIA SẺ</b><b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Hỏi Đáp</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Gallery</a></li>       
                  </ul>
                </li>
                <li><a href="trangngontinh.com/dangtruyen"><b>ĐĂNG TRUYỆN</b></a></li> 
              </ul>
            </div>
          </div>
        </div>

      </div>
    </div>


  <!--================================================== -->

<div class="container-fluid big-wrapper">  
  <div class="row-fluid">
      <div class="form-group form-inline col-xs-pull-2 bentrai2" style="float:right;">
          <input type="text" class="form-control" placeholder="Search ...">
          <button href="[[(data :tim)]]" type="submit" class="btn btn-default">Tìm</button>
          <button href="trangngontinh.com/advancedsearch" type="button" class="btn btn-success">Tìm kiếm nâng cao</button>
      </div>
  </div>    

  <div class="row-fluid">     
      <div class="span3">     

            <div class="hidden-xs">            
            <h3><span class="label label-custom">Truyện Cùng Thể Loại</span></h3>
            <div class="row-fluid sideBar"><!--Side Bar-->                       
                  <div class="list-group">

                    [[(defn sidebar1 [linktruyen linkanh title author genre]
                     (str "<a href='" linktruyen "' class='list-group-item'>
                          <div class='row-fluid'>
                            <div class='span5'><img src='" linkanh "' class='thumbnail img-responsive imgFloatsidebar list-group-item-text' width='90' height='120'></div>
                            <div class='span7'>
                              <h4 class='list-group-item-heading'>" title "</h4>               
                              <p class='blue small'>Tác Giả: " author "<br>
                                                    Thể Loại: " genre "</p>
                            </div>
                         </div>                                   
                        </a>"))

                        (apply str (for [x (data :sidebar1)] 
                              (sidebar1 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre))))
                    ]]


                </div><!--list group-->
            </div><!--sideBar-->
            </div><!--hiddenxs-->

            <br>
            <br>

            <div class="hidden-xs">            
            <h3><span class="label label-custom">Truyện Cùng Tác Giả</span></h3>
            <div class="row-fluid sideBar"><!--Side Bar-->                       
                  <div class="list-group">

                    [[(defn sidebar2 [linktruyen linkanh title author genre]
                     (str "<a href='" linktruyen "' class='list-group-item'>
                          <div class='row-fluid'>
                            <div class='span5'><img src='" linkanh "' class='thumbnail img-responsive imgFloatsidebar list-group-item-text' width='90' height='120'></div>
                            <div class='span7'>
                              <h4 class='list-group-item-heading'>" title "</h4>               
                              <p class='blue small'>Tác Giả: " author "<br>
                                                    Thể Loại: " genre "</p>
                            </div>
                         </div>                                   
                        </a>"))

                        (apply str (for [x (data :sidebar2)] 
                              (sidebar2 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre))))
                    ]]

                </div><!--list group-->
            </div><!--sideBar-->
            </div><!--hiddenxs-->
            
        </div>

           <!--================================================== -->

          <div class="span9">            
            <div class="whiteBgr">
                <div class="row-fluid">
                  <ol class="breadcrumb">
                      <li><a href="trangngontinh.com">Home</a></li>
                      <li><a href="trangngontinh.com/doctruyen">Đọc Truyện</a></li>
                      <li class="active">[[((data :titlepage) :title)]]</li>
                    </ol>
                </div><br>                
                

            <div class="row-fluid">    
              <div class="span4">
                <img src="[[((data :truyeninfo) :linkanh)]]" class="thumbnail img-responsive" width="300" height="425">
              </div>
              <div class="span6">
                <a href="[[((data :truyeninfo) :linktruyen)]]"><h2 class="green"><b>[[((data :truyeninfo) :title)]]</b></h2></a>
                <br>
                <p><i>Tên Khác</i>:  [[((data :truyeninfo) :alternate)]]</p>
                <p><i>Tác Giả</i>:  <a href="[[((data :truyeninfo) :searchauthor)]]">[[((data :truyeninfo) :author)]]</a></p>
                <p><i>Thể Loại</i>:  <a href="[[((data :truyeninfo) :searchgenre)]]">[[((data :truyeninfo) :genre)]]</a></p>
                <p><i>Tình Trạng</i>:  <a href="[[((data :truyeninfo) :searchstate)]]">[[((data :truyeninfo) :state)]]</a></p>
                <div class="minor-info">Nguồn: [[((data :truyeninfo) :source)]]<br>
                                        Editor/Translator: [[((data :truyeninfo) :person)]]<br>
                                        Lượt Xem: [[((data :truyeninfo) :view)]]<br>
                                        Ngày Cập Nhập: [[((data :truyeninfo) :date_added)]]</div>
              </div>
            </div>                             



            <div class="row-fluid">
              <div class="span7">
                <h5 class="orange"><b>Chương Mới Nhất</b></h5>    
                <div class="panel panel-success">                
                  <div class="panel-body">

                    [[(defn chuongmoi [linkchap chapnumber titlechap]
                        (str "<a href='" linkchap "'>Chương " chapnumber ": " titlechap "</a><br>"))

                        (apply str (for [x (data :chuongmoi)] 
                            (chuongmoi (x :linkchap) (x :chapnumber) (x :titlechap))))
                    ]]

                  </div>
                </div>  
              </div>          
            </div>

            <br>

              <!--<h4 class="white highlight">Giới Thiệu</h4>-->
              <h4 class="orange"><b>Giới Thiệu truyện </b><i class="green">[[((data :titlepage) :title)]]</i></h4>
                <div class="well">
                  <p>[[((data :gioithieu) :shortoverview)]]</p>
                  <div id="hiddenBlock" class="anHien">
                    <p>[[((data :gioithieu) :remainoverview)]]</p>
                  </div>
                  <button id="xemThem" type="button" class="btn btn-default btn-sm btn-block 1">Xem Thêm</button>
                </div>    
            

            <br>

            
                <!--<h4 class="white highlight">Mục Lục</h4>-->
                <h4 class="orange"><b>Mục Lục truyện </b><i class="green">[[((data :titlepage) :title)]]</i></h4>
                
                <div class="table-responsive">
                  <table class="table table-striped table-hover ">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Tên Chương</th>                        
                        <th>Ngày Đăng</th>                        
                      </tr>
                    </thead>
                    <tbody>

                      [[(defn mucluc [chapnumber linkchap titlechap date_added]
                         (str "<tr class=''>                  
                                  <td>" chapnumber "</td>
                                  <td><a href='" linkchap "'>" titlechap "</a></td>
                                  <td>" date_added "</td>
                               </tr>"))

                            (apply str (for [x (data :mucluc)] 
                                (mucluc (x :chapnumber) (x :linkchap) (x :titlechap) (x :date_added))))
                      ]]                               
                  
                    </tbody>
                  </table>
                </div>

          
          </div><!--Row-fluid-->

          <br>
          <br>
        

          <div class="row-fluid whiteBgr">    
            <div class="span12">
              <h5 class="white highlight">Gửi Phản Hồi</h5>    
              <br>
              <form class="form-horizontal">
                  <div class="form-group">
                      <label for="inputEmail" class="control-label col-xs-2">Tên</label>
                      <div class="col-xs-4">
                          <input type="email" class="form-control" id="inputEmail" placeholder="Email">
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="inputEmail" class="control-label col-xs-2">Chủ Đề</label>
                      <div class="col-xs-4">
                          <input type="email" class="form-control" id="chude" placeholder="Email">
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="inputText" class="control-label col-xs-2">Cảm Nhận</label>
                      <div class="col-xs-10">                
                          <textarea class="form-control" id="myTextarea" rows="3" placeholder="Hãy thể hiện bản thân ở đây ..."></textarea>
                      </div>
                  </div>
                  <div class="form-group">
                      <div class="col-xs-offset-2 col-xs-10">
                          <button id="cmtbutton" type="button" class="btn btn-default">Gửi Cảm Nhận</button>                          
                      </div>
                  </div>
              </form>    

              <hr>              

              </br>
              <div class="media span9" id="try">
                
              </div>
           
            </div><!--Span12-->
  
    </div><!--Span11-->
  </div><!--Row fluid-->


          </div><!--Span9-269-->
    
    
  </div><!--Row fluid-137-->
</div><!--Container fluid-->

</div><!--le-->

<a href="#" class="blue"><h5 class="heavyText text-center">
  <span class="glyphicon glyphicon-arrow-up"></span> Trở về Đầu</h5></a>

<header class="subhead2">  
  <div class="container">
    <div class="row-fluid text-muted">

      <div class="span1"><h1 class="glypbottom"><span class="glyphicon glyphicon-user"></span></h1></div>
      <div class="span2">
        <h3 class="heavyText white">About</h3>
        <p>Trang Ngôn Tình là trang web đọc truyện miễn phí. Truyện bao gồm các thể loại nổi bật nhất của dòng truyện ngôn tình. Truyện được sưu tầm và đăng tải từ các nguồn trên mạng.</p>
      </div> 

      <div class="span1"><h1 class="glypbottom"><span class="glyphicon glyphicon-upload"></span></h1></div>
      <div class="span2">           
        <h3 class="heavyText white">Đăng Tải Truyện</h3>
        <p>Hoan nghênh mọi sự đóng góp từ bạn đọc. Hãy chung tay xây dựng Trang Ngôn Tình tốt hơn và phù hợp với nhu cầu đọc sách của độc giả.</p>
      </div> 

      <div class="span1"><h1 class="glypbottom"><span class="glyphicon glyphicon-bullhorn"></span></h1></div>
      <div class="span2">
        <h3 class="heavyText white">Quảng Cáo</h3>
        <p>Để quảng cáo, xin vui lòng liên hệ qua địa chỉ: trangngontinh@gmail.com</p>
      </div> 
      <div class="span3">
        <hr>
        <ul class="linkbottom">
          <li><a href="trangngontinh.com" class="text-muted">Trang chủ</a></li>
          <li><a href="trangngontinh.com/danhsachtruyen" class="text-muted">Danh Sách Truyện</a></li>
          <li><a href="trangngontinh.com/doctruyen" class="text-muted">Đọc truyện</a></li>
          <li><a href="trangngontinh.com/englishnovel" class="text-muted">English Novel</a></li>          
          <li><a href="trangngontinh.com/advancedsearch" class="text-muted">Tìm kiếm nâng cao</a></li>
          <li><a href="trangngontinh.com/dangky" class="text-muted">Đăng Ký</a></li>
          <li><a href="trangngontinh.com/dangtruyen" class="text-muted">Đăng Truyện</a></li>
          <li><a href="trangngontinh.com/chiase" class="text-muted">Chia sẻ</a></li>
        </ul>
      </div> 
    </div>  
  </div>
</header>

<footer class="subhead3">
  <div class="container">
    <br>
    <p>© 2014 TrangNgonTinh, CA</p>          
  </div>
</footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   <!-- <script src="bootstrap.js"></script> 
    <script src="bootstrap-example/js/bootstrap-transition.js"></script>
    <script src="bootstrap-example/js/bootstrap-alert.js"></script>
    <script src="bootstrap-example/js/bootstrap-modal.js"></script>
    <script src="bootstrap-example/js/bootstrap-dropdown.js"></script>
    <script src="bootstrap-example/js/bootstrap-scrollspy.js"></script>
    <script src="bootstrap-example/js/bootstrap-tab.js"></script>
    <script src="bootstrap-example/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap-example/js/bootstrap-popover.js"></script>
    <script src="bootstrap-example/js/bootstrap-button.js"></script>-->
    <script src="[[((data :lib-path) :bootcollapsejs)]]"></script>
   <!--<script src="bootstrap-example/js/bootstrap-carousel.js"></script>
    <script src="bootstrap-example/js/bootstrap-typeahead.js"></script>  -->    
<script>
  
  $("#xemThem").click(function(){
     $("#hiddenBlock").slideToggle();    
  });

  $("#hiendangnhap").click(function(){
        $("#dangnhapblock").slideToggle();    
  });

  $("#cmtbutton").click(function(){
      var cmt = $("#myTextarea").val();
      var d = new Date();
      var tieude = $("#chude").val();
      var ten = $("#ten").val();
      var ngay = d.toLocaleDateString();
      var time = d.toLocaleTimeString();
      $("#try").prepend("<img class='media-object img-circle pull-left' src='image/7.jpg' width='64' height='64'>" +
                        "<div class='media-body'>"+
                          "<span class='heavyText orange'>" + ten + "</span>"+ "<br>"+
                          "<span class='media-heading'>" + tieude + "</span>"+
                          "<span class='bentrai2 text-muted small'>" +"Dang ngay "+ ngay +
                                                                      " luc "+ time +"</span>"+"<br>"+
                            cmt+"</div>"+"<hr>");    
    });

  $(document).ready(function(){
    $(".list-group-item:even").addClass("list-group-item-warning");
    $(".list-group-item:odd").addClass("list-group-item-success");
    $("tr:odd").addClass("info");
  });

</script>

  </body>
</html>


(doseq [folder (.listFiles (File. "/resources/public/Truyen"))]
(let [image (File. (str (.getPath folder) "/cover.jpg"))]
(let [smimage (Files.copy(image, (str (.getPath folder) "/smcover.jpg")))]
)
))