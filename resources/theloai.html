%{(require '[ngontinh.libpath :as l]
           '[sodahead.render :as r]
           '[ngontinh.util.truyen :as truyen]
)}

<!DOCTYPE html>
<html lang="en">
<head>

  %{ (def genre (params :genre))
         (def doctruyen (peek (truyen/getTruyen (str "SELECT * FROM truyen where genre ='" genre "'"))))

         nil}


<meta charset="utf-8">
    <meta charset="utf-8">
    <title>Truyện %(params :genre) | Trang Ngôn Tình</title>  
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <link rel="icon" href="%(l/paths :icon)" type="image/gif" sizes="16x16">
    <!-- Bootstrap -->  
    <link href="%(l/paths :bootcss)" rel="stylesheet" media="screen" type="text/css"> 
    <link rel="stylesheet" href="%(l/paths :bootstheme)">
    <link href="%(l/paths :docscss)" rel="stylesheet">  
    <link href="%(l/paths :bootsresponsive)" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="%(l/paths :stylesheet)">
    <style>
        body{
          background-image:url("%(l/paths :bgr)"); 
        }  
        @font-face {
          font-family: 'Glyphicons Halflings';
          src:  url('%(l/paths :font1)');
          src:  url('%(l/paths :font1)?#iefix') format('embedded-opentype'), 
                url('%(l/paths :font2)') format('woff'), 
                url('%(l/paths :font3)') format('truetype'), 
                url('%(l/paths :font4)#glyphicons_halflingsregular') format('svg');
        }
        i{ color: #b3a39a; }
    </style>
</head>

<!--================================================== -->
   <body class="maubody1">
<div class="le">  


%include {"resources/util/pageheader.html"}


    <!--================================================== -->   

  <div class="row-fluid">     
      <div class="span3">              
            <h3><span class="label label-custom label-danger-1">Thể Loại</span></h3> 
            <div class="row-fluid sideBar"><!--Side Bar-->                     
                  <div class="list-group">

                    %{(defn sidebar1 [theogenre genre sotruyen]
                     (str "<a href='" theogenre "' class='list-group-item'>&raquo " genre "<span class='badge pull-right'>" sotruyen "</span></a>"))

                        (apply str (for [x (params :sidebar1)] 
                                  (sidebar1 (x :theogenre) (x :genre) (x :sotruyen))))
                    }
                   
                  </div><!--list group-->
            </div><!--sideBar-->

            <br>
            <br>

           %(r/render "resources/util/truyenxemnhieu.html")

            <br>
            <br>

           %(r/render "resources/util/truyenngaunhien.html")

        </div>

           <!--================================================== -->

          <div class="span9">            
            <div class="whiteBgr">
                <div class="row-fluid">
                  <ol class="breadcrumb">
                      <li><a href="trangngontinh.com">Home</a></li>
                      <li><a href="trangngontinh.com/doctruyen">Đọc Truyện</a></li>
                      <li class="active">Truyện %genre</li>                     
                    </ol>
                </div><br>                
                

                <div class="row-fluid"> 

                    %{(defn truyen1 [linktruyen linkanh title author genre state view]
                     (str "<div class='span3 doctruyen'>
                        <a href='" linktruyen "'><img src='" linkanh "' class='thumbnail' width='140' height='190'></a>
                        <a href='" linktruyen "'><h4><b>" title "</b></h4></a>
                        <p class='text-muted'><span class='small'>Tác Giả:</span> " author "<br>
                                              <span class='small'>Thể Loại:</span> " genre "<br>
                                              <span class='small'>Tình Trạng:</span> " state "<br>     
                                              <span class='small'>Lượt Xem:</span> " view "</p>
                           </div>"))

                        (apply str (for [x (params :truyen1)] 
                                  (truyen1 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre) (x :state) (x :view))))
                      }
                         
                </div><!--a Row-->

                <br>
                <br>  

                <div class="row-fluid"> 

                  %{(defn truyen2 [linktruyen linkanh title author genre state view]
                     (str "<div class='span3 doctruyen'>
                        <a href='" linktruyen "'><img src='" linkanh "' class='thumbnail' width='140' height='190'></a>
                        <a href='" linktruyen "'><h4><b>" title "</b></h4></a>
                        <p class='text-muted'><span class='small'>Tác Giả:</span> " author "<br>
                                              <span class='small'>Thể Loại:</span> " genre "<br>
                                              <span class='small'>Tình Trạng:</span> " state "<br>     
                                              <span class='small'>Lượt Xem:</span> " view "</p>
                           </div>"))

                        (apply str (for [x (params :truyen2)] 
                                  (truyen2 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre) (x :state) (x :view))))
                  }
                    
                </div><!--a Row-->

                <br>
                <br> 

                <div class="row-fluid"> 

                  %{(defn truyen3 [linktruyen linkanh title author genre state view]
                     (str "<div class='span3 doctruyen'>
                        <a href='" linktruyen "'><img src='" linkanh "' class='thumbnail' width='140' height='190'></a>
                        <a href='" linktruyen "'><h4><b>" title "</b></h4></a>
                        <p class='text-muted'><span class='small'>Tác Giả:</span> " author "<br>
                                              <span class='small'>Thể Loại:</span> " genre "<br>
                                              <span class='small'>Tình Trạng:</span> " state "<br>     
                                              <span class='small'>Lượt Xem:</span> " view "</p>
                           </div>"))

                        (apply str (for [x (params :truyen3)] 
                                  (truyen3 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre) (x :state) (x :view))))
                  }
                    
                </div><!--a Row-->

                <br>
                <br>         

                <div class="row-fluid"> 

                  %{(defn truyen4 [linktruyen linkanh title author genre state view]
                     (str "<div class='span3 doctruyen'>
                        <a href='" linktruyen "'><img src='" linkanh "' class='thumbnail' width='140' height='190'></a>
                        <a href='" linktruyen "'><h4><b>" title "</b></h4></a>
                        <p class='text-muted'><span class='small'>Tác Giả:</span> " author "<br>
                                              <span class='small'>Thể Loại:</span> " genre "<br>
                                              <span class='small'>Tình Trạng:</span> " state "<br>     
                                              <span class='small'>Lượt Xem:</span> " view "</p>
                           </div>"))

                        (apply str (for [x (params :truyen4)] 
                                  (truyen4 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre) (x :state) (x :view))))
                  }
                    
                </div><!--a Row-->

                <br>
                <br>  

                <div class="row-fluid"> 

                  %{(defn truyen5 [linktruyen linkanh title author genre state view]
                     (str "<div class='span3 doctruyen'>
                        <a href='" linktruyen "'><img src='" linkanh "' class='thumbnail' width='140' height='190'></a>
                        <a href='" linktruyen "'><h4><b>" title "</b></h4></a>
                        <p class='text-muted'><span class='small'>Tác Giả:</span> " author "<br>
                                              <span class='small'>Thể Loại:</span> " genre "<br>
                                              <span class='small'>Tình Trạng:</span> " state "<br>     
                                              <span class='small'>Lượt Xem:</span> " view "</p>
                           </div>"))

                        (apply str (for [x (params :truyen5)] 
                                  (truyen5 (x :linktruyen) (x :linkanh) (x :title) (x :author) (x :genre) (x :state) (x :view))))
                  }
                    
                </div><!--a Row-->

                <br>
                <br> 
                <div class="row-fluid text-center">                    
                    <ul class="pagination">
                      <li class="disabled"><a href="#">&laquo;</a></li>
                      <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
                      <li><a href="#">2</a></li>
                      <li><a href="#">3</a></li>
                      <li><a href="#">4</a></li>
                      <li><a href="#">5</a></li>
                      <li><a href="#">&raquo;</a></li>
                    </ul>
                </div>    

            </div><!--whiteBgr-->  
              
          <br>
          <br>           
          
 


      </div><!--Span9-269-->
    
    
  </div><!--Row fluid-137-->
</div><!--Container fluid-->

</div><!--le-->

%include {"resources/public/ngontinh/utility/footer.html"}

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
   <!-- <script src="bootstrap.js"></script> 
    <script src="bootstrap-example/js/bootstrap-transition.js"></script>
    <script src="bootstrap-example/js/bootstrap-alert.js"></script>
    <script src="bootstrap-example/js/bootstrap-modal.js"></script>
    <script src="bootstrap-example/js/bootstrap-dropdown.js"></script>
    <script src="bootstrap-example/js/bootstrap-scrollspy.js"></script>
    <script src="bootstrap-example/js/bootstrap-tab.js"></script>
    <script src="bootstrap-example/js/bootstrap-tooltip.js"></script>
    <script src="bootstrap-example/js/bootstrap-popover.js"></script>
    <script src="bootstrap-example/js/bootstrap-button.js"></script>-->
    <script src="%(l/paths :bootcollapsejs)"></script>
   <!--<script src="bootstrap-example/js/bootstrap-carousel.js"></script>
    <script src="bootstrap-example/js/bootstrap-typeahead.js"></script>  -->  
<script>
  
  $("#xemThem").click(function(){
    $("#hiddenBlock").slideToggle();    
  });

  $("#hiendangnhap").click(function(){
        $("#dangnhapblock").slideToggle();    
      });

  $(document).ready(function(){
    $(".list-group-item:even").addClass("list-group-item-warning");
    $(".list-group-item:odd").addClass("list-group-item-success");
  });
  
</script>

  </body>
</html>